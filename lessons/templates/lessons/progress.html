{% extends 'lessons/base.html' %} {% block title %}Ti·∫øn ƒë·ªô - H·ªçc Ch·ªØ C√°i{%
endblock %} {% block content %}
<style>
  .progress-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 40px;
    border-radius: 15px;
    margin-bottom: 30px;
    text-align: center;
  }

  .progress-title {
    color: white;
    font-size: 32px;
    margin-bottom: 20px;
  }

  .main-progress {
    display: flex;
    align-items: center;
    gap: 30px;
    margin-bottom: 30px;
  }

  .progress-circle {
    position: relative;
    width: 150px;
    height: 150px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-direction: column;
  }

  .progress-percentage {
    font-size: 36px;
    font-weight: bold;
  }

  .progress-label {
    font-size: 12px;
    opacity: 0.9;
  }

  .progress-stats {
    flex: 1;
  }

  .stat-item {
    display: flex;
    justify-content: space-between;
    margin-bottom: 15px;
    font-size: 16px;
  }

  .stat-bar {
    height: 10px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
    overflow: hidden;
    margin-top: 5px;
  }

  .stat-bar-fill {
    height: 100%;
    background: rgba(255, 255, 255, 0.8);
    transition: width 0.3s ease;
  }

  .lessons-status {
    margin-top: 40px;
  }

  .lessons-title {
    font-size: 24px;
    margin-bottom: 20px;
    color: #667eea;
  }

  .lesson-status-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
  }

  .lesson-status-card {
    background: white;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
  }

  .lesson-status-card.completed {
    border-left: 5px solid #4caf50;
  }

  .lesson-status-card.not-completed {
    border-left: 5px solid #999;
  }

  .lesson-status-icon {
    font-size: 28px;
    margin-bottom: 10px;
  }

  .lesson-status-name {
    font-size: 18px;
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
  }

  .lesson-status-text {
    font-size: 14px;
    color: #999;
  }

  .completed-badge {
    display: inline-block;
    background: #4caf50;
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 12px;
    margin-top: 10px;
    font-weight: 600;
  }

  .not-completed-badge {
    display: inline-block;
    background: #f5f5f5;
    color: #999;
    padding: 5px 10px;
    border-radius: 5px;
    font-size: 12px;
    margin-top: 10px;
    font-weight: 600;
  }

  .empty-state {
    text-align: center;
    padding: 40px;
    color: #999;
  }

  .empty-state-icon {
    font-size: 48px;
    margin-bottom: 20px;
  }

  .back-home {
    display: inline-block;
    margin-bottom: 20px;
    padding: 10px 20px;
    background: #667eea;
    color: white;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: all 0.3s ease;
  }

  .back-home:hover {
    background: #5568d3;
    transform: translateY(-2px);
  }
</style>

<a href="{% url 'home' %}" class="back-home">‚Üê Quay l·∫°i trang ch·ªß</a>

<div class="progress-header">
  <div class="progress-title">üìä Ti·∫øn ƒë·ªô h·ªçc t·∫≠p c·ªßa {{ user.username }}</div>

  <div class="main-progress">
    <div class="progress-circle">
      <div class="progress-percentage">
        {{ completion_percentage|floatformat:0 }}%
      </div>
      <div class="progress-label">Ho√†n th√†nh</div>
    </div>

    <div class="progress-stats">
      <div class="stat-item">
        <span>B√†i h·ªçc ho√†n th√†nh</span>
        <strong>{{ completed_lessons.count }} / {{ total_lessons }}</strong>
      </div>
      <div class="stat-bar">
        <div
          class="stat-bar-fill"
          style="width: {{ completion_percentage|floatformat:0 }}%"
        ></div>
      </div>

      <div class="stat-item" style="margin-top: 20px">
        <span>T·ªïng ƒëi·ªÉm</span>
        <strong>{{ progress.total_score }} ƒëi·ªÉm</strong>
      </div>

      <div class="stat-item">
        <span>Huy hi·ªáu</span>
        <strong>{{ progress.badges.count }} huy hi·ªáu</strong>
      </div>
    </div>
  </div>
</div>

<div class="lessons-status">
  <div class="lessons-title">üìö Tr·∫°ng th√°i b√†i h·ªçc</div>

  {% if completed_lessons or total_lessons > 0 %}
  <div class="lesson-status-grid">
    {% for lesson in lessons %}
    <div
      class="lesson-status-card {% if lesson in completed_lessons %}completed{% else %}not-completed{% endif %}"
    >
      <div class="lesson-status-icon">
        {% if lesson.lesson_type == 'alphabet' %} üî§ {% elif lesson.lesson_type
        == 'vocabulary' %} üìñ {% elif lesson.lesson_type == 'sentences' %} üí¨ {%
        else %} üéµ {% endif %}
      </div>
      <div class="lesson-status-name">{{ lesson.title }}</div>
      <div class="lesson-status-text">
        {{ lesson.description|truncatewords:5 }}
      </div>

      {% if lesson in completed_lessons %}
      <div class="completed-badge">‚úÖ Ho√†n th√†nh</div>
      {% else %}
      <div class="not-completed-badge">‚è≥ Ch∆∞a l√†m</div>
      {% endif %}
    </div>
    {% endfor %}
  </div>
  {% else %}
  <div class="empty-state">
    <div class="empty-state-icon">üìö</div>
    <p>Ch∆∞a c√≥ b√†i h·ªçc n√†o. H√£y quay l·∫°i sau!</p>
  </div>
  {% endif %}
</div>

{% endblock %}
